set(CMAKE_SYSTEM_NAME Windows)

IF(NOT DEFINED USE_64BITS)
  IF(DEFINED ENV{USE_64BITS})
    SET(USE_64BITS $ENV{USE_64BITS})
    IF(USE_64BITS STREQUAL "1" OR
       USE_64BITS STREQUAL "ON" OR USE_64BITS STREQUAL "TRUE")
      SET(USE_64BITS ON)
    ELSE()
      SET(USE_64BITS OFF)
    ENDIF()
  ELSE()
    SET(USE_64BITS OFF)
  ENDIF()
endif()

IF(USE_64BITS)
  SET(CROSSCOMPILER x86_64-w64-mingw32-)
ELSE()
  SET(CROSSCOMPILER i686-w64-mingw32-)
ENDIF()

if($ENV{CROSSCOMPILER})
  set(CROSSCOMPILER $ENV{CROSSCOMPILER})
endif()

set(CMAKE_C_COMPILER ${CROSSCOMPILER}gcc)
set(CMAKE_CXX_COMPILER ${CROSSCOMPILER}g++)
set(CMAKE_STRIP ${CROSSCOMPILER}strip)
set(CMAKE_RC_COMPILER ${CROSSCOMPILER}windres)

if($ENV{CMAKE_FIND_ROOT_PATH})
  set(CMAKE_FIND_ROOT_PATH ${CMAKE_FIND_ROOT_PATH})
else()
  execute_process(COMMAND ${CMAKE_C_COMPILER} --print-sysroot
                  OUTPUT_VARIABLE SYSROOT)
  if($ENV{SYSROOT})
    set(SYSROOT $ENV{SYSROOT})
  endif()
  set(CMAKE_FIND_ROOT_PATH ${SYSROOT})
endif()

set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
